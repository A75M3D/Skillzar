<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikPro - ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .snap-y-mandatory {
            scroll-snap-type: y mandatory;
        }
        .snap-start {
            scroll-snap-align: start;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .fade-in {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-black text-white font-sans" dir="rtl">
    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª YouTube API -->
    <script>
        // ===== Ø¶Ø¹ Ù‡Ù†Ø§ Ø¨ÙŠØ§Ù†Ø§Øª YouTube API Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ =====
        const YOUTUBE_CONFIG = {
            // Client ID Ùˆ Client Secret Ù…Ù† Google Cloud Console
            clientId: '43114852871-p9ca3ccuiqtj39p65lgvhvuud536l1n1.apps.googleusercontent.com', // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§
            clientSecret: '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', // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§
            apiKey: 'AIzaSyASUAnslGu-5VWpvwtR9Huf6v3Qsk6MEE4', // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§
            scopes: [
                'https://www.googleapis.com/auth/youtube.upload',
                'https://www.googleapis.com/auth/youtube'
            ],
            redirectUri: window.location.origin
        };
    </script>

    <div class="max-w-md mx-auto h-screen bg-black relative overflow-hidden">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div class="fixed top-0 left-0 right-0 z-50 bg-black pt-2 pb-1 px-4 max-w-md mx-auto">
            <div class="flex justify-between items-center text-white">
                <div class="text-sm font-semibold" id="current-time"></div>
                <div class="flex space-x-2 space-x-reverse">
                    <i class="fas fa-signal text-xs"></i>
                    <i class="fas fa-wifi text-xs"></i>
                    <i class="fas fa-battery-three-quarters text-xs"></i>
                </div>
            </div>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
        <div class="fixed top-8 left-0 right-0 z-40 bg-black pt-4 pb-3 px-4 max-w-md mx-auto">
            <div class="flex justify-between items-center">
                <div class="text-lg font-bold">TikPro</div>
                <div class="flex space-x-4 space-x-reverse">
                    <i class="fas fa-search text-xl cursor-pointer" onclick="openSearch()"></i>
                    <i class="fas fa-plus text-xl cursor-pointer" onclick="openUploadModal()"></i>
                </div>
            </div>
        </div>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª -->
        <div id="video-feed" class="h-full overflow-y-auto snap-y-mandatory scrollbar-hide pt-20 pb-16">
            <!-- Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
        <div id="loading-screen" class="fixed inset-0 bg-black z-50 flex flex-col items-center justify-center">
            <div class="text-6xl text-pink-500 mb-6 pulse">
                <i class="fas fa-play-circle"></i>
            </div>
            <div class="text-xl font-semibold mb-2">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</div>
            <div class="w-48 h-1 bg-gray-800 rounded-full mt-6 overflow-hidden">
                <div class="h-full bg-pink-500 rounded-full animate-pulse"></div>
            </div>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ -->
        <div class="fixed bottom-0 left-0 right-0 z-50 bg-black border-t border-gray-800 max-w-md mx-auto">
            <div class="flex justify-around items-center py-2">
                <div class="flex flex-col items-center cursor-pointer text-pink-500" onclick="showHome()">
                    <i class="fas fa-home text-xl"></i>
                    <span class="text-xs mt-1">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                </div>
                <div class="flex flex-col items-center cursor-pointer text-gray-400" onclick="openSearch()">
                    <i class="fas fa-search text-xl"></i>
                    <span class="text-xs mt-1">Ø§ÙƒØªØ´Ù</span>
                </div>
                <div class="flex flex-col items-center cursor-pointer -mt-4" onclick="openUploadModal()">
                    <div class="bg-pink-500 w-10 h-8 rounded flex items-center justify-center pulse">
                        <i class="fas fa-plus text-white"></i>
                    </div>
                </div>
                <div class="flex flex-col items-center cursor-pointer text-gray-400" onclick="showProfile()">
                    <i class="fas fa-user text-xl"></i>
                    <span class="text-xs mt-1">Ø­Ø³Ø§Ø¨ÙŠ</span>
                </div>
            </div>
        </div>

        <!-- Ù†Ø§ÙØ°Ø© Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
        <div id="upload-modal" class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden flex-col items-center justify-center p-4">
            <div class="bg-gray-900 rounded-2xl p-6 w-full max-w-md">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold">Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ø¬Ø¯ÙŠØ¯</h2>
                    <button onclick="closeUploadModal()" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
                <div id="upload-area" class="border-2 border-dashed border-gray-600 rounded-xl p-8 text-center mb-4 cursor-pointer hover:border-pink-500 transition"
                     onclick="document.getElementById('video-file').click()">
                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                    <p class="text-gray-400">Ø§Ù†Ù‚Ø± Ù„Ø§Ø®ØªÙŠØ§Ø± ÙÙŠØ¯ÙŠÙˆ Ø£Ùˆ Ø§Ø³Ø­Ø¨Ù‡ Ù‡Ù†Ø§</p>
                    <p class="text-sm text-gray-500 mt-2">Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø£Ù‚ØµÙ‰: 100MB</p>
                </div>

                <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
                <div id="video-preview" class="hidden mb-4">
                    <video id="preview-player" controls class="w-full rounded-lg"></video>
                </div>

                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
                <div class="space-y-4">
                    <input type="file" id="video-file" accept="video/*" class="hidden" onchange="handleVideoSelect(event)">
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</label>
                        <input type="text" id="video-title" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" 
                               class="w-full bg-gray-800 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">ÙˆØµÙ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</label>
                        <textarea id="video-description" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" 
                                  class="w-full bg-gray-800 rounded-lg px-4 py-2 h-20 focus:outline-none focus:ring-2 focus:ring-pink-500"></textarea>
                    </div>

                    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØª -->
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØª</span>
                        <div class="flex items-center space-x-2 space-x-reverse">
                            <span id="volume-status" class="text-sm">ØµÙˆØª Ø¹Ø§Ø¯ÙŠ</span>
                            <button id="volume-btn" onclick="toggleVolume()" class="bg-gray-800 rounded-full p-2">
                                <i class="fas fa-volume-up text-pink-500"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Ø²Ø± Ø§Ù„Ø±ÙØ¹ -->
                    <button id="upload-btn" onclick="uploadVideoToYouTube()" 
                            class="w-full bg-pink-500 hover:bg-pink-600 text-white font-semibold py-3 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed"
                            disabled>
                        <i class="fas fa-upload mr-2"></i>
                        Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ YouTube
                    </button>

                    <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø±ÙØ¹ -->
                    <div id="upload-progress" class="hidden">
                        <div class="flex justify-between text-sm mb-2">
                            <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...</span>
                            <span id="progress-percent">0%</span>
                        </div>
                        <div class="w-full bg-gray-800 rounded-full h-2">
                            <div id="progress-bar" class="bg-pink-500 h-2 rounded-full transition-all" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        const appState = {
            currentUser: null,
            accessToken: null,
            videos: [],
            currentVideo: null,
            isMuted: false, // Ø§Ù„ØµÙˆØª Ù…ÙØ¹Ù„ Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§
            uploadProgress: 0
        };

        // Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ‡Ù…ÙŠØ© Ù„Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
        const mockVideos = [
            {
                id: 'video1',
                title: 'ÙÙŠØ¯ÙŠÙˆ ØªØ¬Ø±ÙŠØ¨ÙŠ 1',
                description: 'Ù‡Ø°Ø§ ÙÙŠØ¯ÙŠÙˆ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ø¹Ø±Ø¶',
                videoUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
                user: { name: 'Ù…Ø³ØªØ®Ø¯Ù… 1', avatar: 'ğŸ‘¤' },
                likes: 150,
                comments: 25,
                shares: 10
            },
            {
                id: 'video2', 
                title: 'ÙÙŠØ¯ÙŠÙˆ ØªØ¬Ø±ÙŠØ¨ÙŠ 2',
                description: 'ÙÙŠØ¯ÙŠÙˆ ØªØ¬Ø±ÙŠØ¨ÙŠ Ø¢Ø®Ø± Ù„Ù„Ø¹Ø±Ø¶',
                videoUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4',
                user: { name: 'Ù…Ø³ØªØ®Ø¯Ù… 2', avatar: 'ğŸ‘¤' },
                likes: 89,
                comments: 12,
                shares: 5
            }
        ];

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function initApp() {
            updateTime();
            setInterval(updateTime, 60000);
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
            loadMockVideos();
            
            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ 2 Ø«Ø§Ù†ÙŠØ©
            setTimeout(() => {
                document.getElementById('loading-screen').classList.add('hidden');
            }, 2000);

            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© token Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
            const savedToken = localStorage.getItem('youtube_access_token');
            if (savedToken) {
                appState.accessToken = savedToken;
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-EG', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false 
            });
            document.getElementById('current-time').textContent = timeString;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆÙ‡Ù…ÙŠØ©
        function loadMockVideos() {
            appState.videos = mockVideos;
            renderVideos();
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
        function renderVideos() {
            const videoFeed = document.getElementById('video-feed');
            videoFeed.innerHTML = '';

            appState.videos.forEach((video, index) => {
                const videoElement = createVideoElement(video, index);
                videoFeed.appendChild(videoElement);
            });
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± ÙÙŠØ¯ÙŠÙˆ
        function createVideoElement(video, index) {
            const videoContainer = document.createElement('div');
            videoContainer.className = 'h-screen snap-start relative bg-black fade-in';

            videoContainer.innerHTML = `
                <video 
                    src="${video.videoUrl}" 
                    class="w-full h-full object-cover"
                    ${index === 0 ? 'autoplay' : ''}
                    ${appState.isMuted ? 'muted' : ''}
                    loop
                    playsinline
                ></video>
                
                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
                <div class="absolute bottom-20 left-4 right-4 text-white">
                    <div class="flex items-center mb-3">
                        <div class="w-10 h-10 bg-pink-500 rounded-full flex items-center justify-center mr-3">
                            <span class="font-bold">${video.user.avatar}</span>
                        </div>
                        <div class="font-semibold">${video.user.name}</div>
                        <button class="mr-4 bg-pink-500 text-white text-xs font-semibold px-3 py-1 rounded" 
                                onclick="followUser('${video.user.name}')">
                            Ù…ØªØ§Ø¨Ø¹Ø©
                        </button>
                    </div>
                    <div class="mb-2 text-sm">${video.title}</div>
                    <div class="flex items-center text-xs space-x-4 space-x-reverse">
                        <span><i class="fas fa-music mr-1"></i> ${video.user.name}</span>
                    </div>
                </div>
                
                <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ -->
                <div class="absolute right-4 bottom-20 flex flex-col items-center space-y-6">
                    <div class="flex flex-col items-center" onclick="toggleLike('${video.id}')">
                        <div class="p-2 rounded-full bg-black bg-opacity-50">
                            <i class="fas fa-heart text-2xl text-white"></i>
                        </div>
                        <span class="text-white text-xs mt-1 font-semibold">${video.likes}</span>
                    </div>
                    
                    <div class="flex flex-col items-center" onclick="showComments('${video.id}')">
                        <div class="p-2 rounded-full bg-black bg-opacity-50">
                            <i class="fas fa-comment text-2xl text-white"></i>
                        </div>
                        <span class="text-white text-xs mt-1 font-semibold">${video.comments}</span>
                    </div>
                    
                    <div class="flex flex-col items-center" onclick="shareVideo('${video.id}')">
                        <div class="p-2 rounded-full bg-black bg-opacity-50">
                            <i class="fas fa-share text-2xl text-white"></i>
                        </div>
                        <span class="text-white text-xs mt-1 font-semibold">${video.shares}</span>
                    </div>
                </div>
                
                <!-- Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØµÙˆØª -->
                <button onclick="toggleVideoMute(this)" class="absolute top-24 right-4 bg-black bg-opacity-50 rounded-full p-2">
                    <i class="fas fa-volume-up text-white text-xl"></i>
                </button>
            `;

            return videoContainer;
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
        function openUploadModal() {
            document.getElementById('upload-modal').classList.remove('hidden');
            resetUploadForm();
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
        function closeUploadModal() {
            document.getElementById('upload-modal').classList.add('hidden');
        }

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
        function handleVideoSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¬Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ (100MB ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰)
            if (file.size > 100 * 1024 * 1024) {
                alert('Ø­Ø¬Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 100MB');
                return;
            }

            // Ø¹Ø±Ø¶ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
            const videoPreview = document.getElementById('video-preview');
            const previewPlayer = document.getElementById('preview-player');
            const uploadArea = document.getElementById('upload-area');

            videoPreview.classList.remove('hidden');
            uploadArea.classList.add('hidden');

            const videoURL = URL.createObjectURL(file);
            previewPlayer.src = videoURL;

            // Ø­ÙØ¸ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø®ØªØ§Ø±
            appState.currentVideo = file;

            // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø±ÙØ¹
            document.getElementById('upload-btn').disabled = false;
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¹Ø§Ù…
        function toggleVolume() {
            appState.isMuted = !appState.isMuted;
            const volumeBtn = document.getElementById('volume-btn');
            const volumeStatus = document.getElementById('volume-status');
            
            if (appState.isMuted) {
                volumeBtn.innerHTML = '<i class="fas fa-volume-mute text-gray-400"></i>';
                volumeStatus.textContent = 'ØµÙˆØª ØµØ§Ù…Øª';
            } else {
                volumeBtn.innerHTML = '<i class="fas fa-volume-up text-pink-500"></i>';
                volumeStatus.textContent = 'ØµÙˆØª Ø¹Ø§Ø¯ÙŠ';
            }

            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
            document.querySelectorAll('video').forEach(video => {
                video.muted = appState.isMuted;
            });
        }

        // ØªØ¨Ø¯ÙŠÙ„ ØµÙˆØª ÙÙŠØ¯ÙŠÙˆ Ù…Ø¹ÙŠÙ†
        function toggleVideoMute(button) {
            const video = button.closest('.snap-start').querySelector('video');
            video.muted = !video.muted;
            
            if (video.muted) {
                button.innerHTML = '<i class="fas fa-volume-mute text-white text-xl"></i>';
            } else {
                button.innerHTML = '<i class="fas fa-volume-up text-white text-xl"></i>';
            }
        }

        // Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ YouTube
        async function uploadVideoToYouTube() {
            if (!appState.currentVideo) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            const title = document.getElementById('video-title').value;
            const description = document.getElementById('video-description').value;

            if (!title) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ');
                return;
            }

            // Ø¹Ø±Ø¶ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            document.getElementById('upload-progress').classList.remove('hidden');
            document.getElementById('upload-btn').disabled = true;

            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø±ÙØ¹
                for (let i = 0; i <= 100; i += 10) {
                    await new Promise(resolve => setTimeout(resolve, 300));
                    updateUploadProgress(i);
                }

                // Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ YouTube API Ø§Ù„ÙØ¹Ù„ÙŠ
                await uploadToYouTubeAPI(appState.currentVideo, title, description);

                alert('ØªÙ… Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ YouTube!');
                closeUploadModal();
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                addNewVideo({
                    id: 'new-' + Date.now(),
                    title: title,
                    description: description,
                    videoUrl: URL.createObjectURL(appState.currentVideo),
                    user: { name: 'Ø£Ù†Øª', avatar: 'ğŸ‘¤' },
                    likes: 0,
                    comments: 0,
                    shares: 0
                });

            } catch (error) {
                console.error('Error uploading video:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ' + error.message);
            } finally {
                document.getElementById('upload-progress').classList.add('hidden');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· ØªÙ‚Ø¯Ù… Ø§Ù„Ø±ÙØ¹
        function updateUploadProgress(percent) {
            document.getElementById('progress-bar').style.width = percent + '%';
            document.getElementById('progress-percent').textContent = percent + '%';
            appState.uploadProgress = percent;
        }

        // Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ YouTube API (ÙˆØ¸ÙŠÙØ© ÙˆÙ‡Ù…ÙŠØ©)
        async function uploadToYouTubeAPI(videoFile, title, description) {
            // Ù‡Ø°Ù‡ ÙˆØ¸ÙŠÙØ© ÙˆÙ‡Ù…ÙŠØ© - ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø³ØªÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ YouTube API
            
            if (!YOUTUBE_CONFIG.clientId || YOUTUBE_CONFIG.clientId === 'YOUR_CLIENT_ID_HERE') {
                throw new Error('ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Client ID Ùˆ Client Secret ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª YouTube API');
            }

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§ØªØµØ§Ù„ API
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            return {
                success: true,
                videoId: 'yt_' + Date.now(),
                message: 'ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­'
            };
        }

        // Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        function addNewVideo(video) {
            appState.videos.unshift(video);
            renderVideos();
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±ÙØ¹
        function resetUploadForm() {
            document.getElementById('video-file').value = '';
            document.getElementById('video-title').value = '';
            document.getElementById('video-description').value = '';
            document.getElementById('video-preview').classList.add('hidden');
            document.getElementById('upload-area').classList.remove('hidden');
            document.getElementById('upload-btn').disabled = true;
            document.getElementById('upload-progress').classList.add('hidden');
            appState.currentVideo = null;
            appState.uploadProgress = 0;
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙØ§Ø¹Ù„
        function toggleLike(videoId) {
            alert(`ØªÙ… Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ Ø¨Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ${videoId}`);
        }

        function showComments(videoId) {
            alert(`ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ${videoId}`);
        }

        function shareVideo(videoId) {
            alert(`Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ${videoId}`);
        }

        function followUser(userName) {
            alert(`Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${userName}`);
        }

        function showHome() {
            // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        }

        function showProfile() {
            alert('ØµÙØ­Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
        }

        function openSearch() {
            alert('Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø­Ø«');
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
